<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Saraswati Puja 2026</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        body { margin: 0; font-family: 'Poppins', sans-serif; background: #fff9c4; color: #5d4037; overflow-x: hidden; }
        .flower { position: fixed; top: -10%; z-index: 100; animation: fall 5s linear infinite; font-size: 20px; }
        @keyframes fall { to { transform: translateY(110vh) rotate(360deg); } }
        .container { padding: 20px; display: flex; flex-direction: column; align-items: center; min-height: 100vh; }
        .card { background: white; width: 100%; max-width: 380px; border-radius: 20px; padding: 25px; text-align: center; box-shadow: 0 10px 30px rgba(0,0,0,0.15); border: 4px solid #ff9800; margin-top: 20px; }
        h1 { color: #e65100; font-size: 24px; }
        input, select { width: 100%; padding: 12px; margin: 10px 0; border: 2px solid #ffe082; border-radius: 10px; font-size: 16px; box-sizing: border-box; }
        .btn { background: #ff5722; color: white; padding: 15px; width: 100%; border: none; border-radius: 50px; font-size: 18px; font-weight: bold; cursor: pointer; margin-top: 10px; box-shadow: 0 5px 15px rgba(255,87,34,0.3); }
        #receipt { display: none; background: #f1f8e9; border: 2px dashed #4caf50; padding: 20px; margin-top: 20px; border-radius: 15px; }
        .loader { display: none; color: #ff9800; font-weight: bold; margin: 10px; }
    </style>
</head>
<body>

<div class="container">
    <div class="card" id="mainBox">
        <div id="inviteArea">
            <img src="https://cdn-icons-png.flaticon.com/512/2913/2913404.png" width="80">
            <h1>Saraswati Puja 2026</h1>
            <p>Aap sabhi ko sadar amantran hai. Puja ko safal banane ke liye apna yogdaan dein.</p>
            <button class="btn" onclick="showForm()">Donation / Chanda Dein</button>
        </div>

        <div id="formArea" style="display:none;">
            <h3>Donation Details</h3>
            <input type="text" id="uName" placeholder="Poora Naam (Zaroori)" required>
            <select id="uClass" required>
                <option value="">Class Chunein</option>
                <option value="8">Class 8</option>
                <option value="9">Class 9</option>
                <option value="10">Class 10</option>
                <option value="11">Class 11</option>
                <option value="12">Class 12</option>
                <option value="Other">Other</option>
            </select>
            <input type="number" id="uAmt" placeholder="Amount (â‚¹)" required>
            <div id="loading" class="loader">Data save ho raha hai...</div>
            <button class="btn" id="payBtn" onclick="submitAndPay()">Submit & Pay Now</button>
        </div>

        <div id="receipt">
            <h3 style="color:green; margin:0;">Jai Maa Saraswati!</h3>
            <p style="font-size: 12px;">Payment Receipt</p>
            <hr>
            <p align="left"><b>Naam:</b> <span id="rName"></span></p>
            <p align="left"><b>Class:</b> <span id="rClass"></span></p>
            <p align="left"><b>Amount:</b> â‚¹<span id="rAmt"></span></p>
            <p align="left" style="font-size: 10px; color: gray;">Date: <span id="rDate"></span></p>
            <button class="btn" style="background:#4caf50; font-size:14px;" onclick="downloadRec()">Receipt Download Karein</button>
        </div>
    </div>
</div>

<script>
    function showForm() {
        document.getElementById('inviteArea').style.display = 'none';
        document.getElementById('formArea').style.display = 'block';
    }

    function submitAndPay() {
        const name = document.getElementById('uName').value;
        const cls = document.getElementById('uClass').value;
        const amt = document.getElementById('uAmt').value;
        const scriptUrl = "APNA_SCRIPT_URL_YAHAN_DALEIN"; 

        if(!name || !cls || !amt) {
            alert("Kripya saari details bharein!");
            return;
        }

        document.getElementById('payBtn').disabled = true;
        document.getElementById('loading').style.display = 'block';

        // Google Sheet mein data bhejna
        fetch(`${scriptUrl}?name=${encodeURIComponent(name)}&class=${encodeURIComponent(cls)}&amount=${encodeURIComponent(amt)}`, {
            method: 'POST'
        })
        .then(() => {
            // UPI Payment Link (FamPay/PhonePe)
            const upiId = "yourname@fampay"; 
            window.location.href = `upi://pay?pa=${upiId}&pn=PujaCommittee&am=${amt}&cu=INR&tn=PujaDonation-${name}`;

            // Receipt setup
            document.getElementById('formArea').style.display = 'none';
            document.getElementById('rName').innerText = name;
            document.getElementById('rClass').innerText = cls;
            document.getElementById('rAmt').innerText = amt;
            document.getElementById('rDate').innerText = new Date().toLocaleString();
            document.getElementById('receipt').style.display = 'block';
        })
        .catch(err => {
            alert("Error: Data save nahi ho paya. Internet check karein.");
            document.getElementById('payBtn').disabled = false;
        });
    }

    function downloadRec() {
        html2canvas(document.querySelector("#receipt")).then(canvas => {
            let a = document.createElement('a');
            a.href = canvas.toDataURL();
            a.download = 'Saraswati_Puja_Receipt.png';
            a.click();
        });
    }

    // Flower animation
    setInterval(() => {
        const f = document.createElement('div');
        f.className = 'flower';
        f.innerHTML = 'ðŸŒ¸';
        f.style.left = Math.random() * 100 + 'vw';
        document.body.appendChild(f);
        setTimeout(() => f.remove(), 5000);
    }, 400);
</script>
</body>
</html>
